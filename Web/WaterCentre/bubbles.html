<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bubbles</title>
</head>
<body>
<script src="js/jquery-2.2.0.js"></script>
<script src="js/tree.js"></script>
<script>
    'use strict';

    const offset = 10;
    const length = 60;

    var Bubble = {
        dic: {},
        xMax: 0,
        yMax: 0,
        initArray: [],

        create: function (id, innerHTML, direction, distance, parent) {
            Bubble.dic[id] = {
                innerHTML: innerHTML,
                direction: direction,
                distance: distance,
                parent: parent
            };
            return id;
        },

        getRectTo: function (id) {
            var bubble = Bubble.dic[id];

            if (!bubble.xTo) {
                bubble.xTo = bubble.yTo = length;

                if (bubble.parent) {
                    var parentRect = Bubble.getRectTo(bubble.parent);

                    if (bubble.direction === 'left' || bubble.direction === 'right') {
                        bubble.xTo += (parentRect.xTo + bubble.distance);
                        bubble.yTo = parentRect.yTo;
                    } else {
                        bubble.xTo = parentRect.xTo;
                        bubble.yTo += (parentRect.yTo + bubble.distance);
                    }
                }

                else {
                    Bubble.initArray.push(id);
                }
            }
            Bubble.xMax = Math.max(Bubble.xMax, bubble.xTo);
            Bubble.yMax = Math.max(Bubble.yMax, bubble.yTo);

            return {
                xTo: bubble.xTo,
                yTo: bubble.yTo
            }
        },

        print: function () {
            var keys = Object.keys(Bubble.dic);
            for (var i = 0; i < keys.length; i++) {
                Bubble.getRectTo(keys[i])
            }

            for (i = 0; i < Bubble.initArray; i++) {

            }

            xTree = Tree.create(0, Bubble.xMax * 2);
            yTree = Tree.create(0, Bubble.yMax * 2);
        }
    };
</script>
<script>
    const distance = 100;

    /* Sample */
    Bubble.create(1, '<div>1</div>');
    Bubble.create(2, '<div>2</div>', 'bottom', distance, 1);
    Bubble.create(3, '<div>3</div>', 'top', distance, 1);
    Bubble.create(4, '<div>4</div>', 'left', distance, 1);
    Bubble.create(5, '<div>5</div>', 'right', distance, 1);
    Bubble.create(6, '<div>6</div>', 'right', distance, 5);
    Bubble.create(7, '<div>7</div>', 'bottom', distance, 6);
    /* end */

    Bubble.print();
    debugger;
</script>
</body>
</html>